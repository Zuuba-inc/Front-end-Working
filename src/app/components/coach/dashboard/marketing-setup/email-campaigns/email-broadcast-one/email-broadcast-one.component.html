<div class="page-wrapper">
           
    <!-- start section header -->
    <section class="header" style="position: fixed;z-index: 2;width: 100%;">
        <div class="row">
            <div id="back" class="d-inline col-lg-1 p-0" >
                <button type="button" class="btn btn-light rounded-0" [routerLink]="['/marketingSetup/emailCampaigns/list']">
                        <img src="./assets/icons/ic_back.svg" >
                    Back
                </button>
            </div>
            <div id="build" class="d-inline col-lg-11 p-0 border-0 text-center" style=" max-width: 90%;">
                  <div [ngStyle]="{'padding-top': emailTitle.length > 50 ? '0' : '10px'}" >
                    <span id="emailTitle" 
                        (mouseover)="editingEmailTitleBorder('Show')" (mouseleave)="editingEmailTitleBorder('Hide')"
                        style="display: inline-block;width: 30%;border-bottom: none;text-align: center;">
                        <h2 (click)="editingEmailTitle();" class="d-inline"
                            id="templateTitleText" (blur)="saveEmailTempelateTitle()" contenteditable="true" (keydown)="onEnter($event)" >
                            {{emailCampaign.emailCapaignTitle}}</h2>

                        <button id="emailTitleEditButton" class="pencil"
                            style="background: none;border: none;margin: 0;padding: 0;width: 30px;float:right;display: none; ">
                            <img id="editTitleImage" style="max-width: 16px !important;
                        max-height: 16px !important;" src="assets/icons/pencil-edit-button (1).svg">

                        </button>
                    </span>
                    <div *ngIf="emailTitle.length == 30" style="z-index: 9999;position: relative;">
                        <span style="color: red; font-size: 12px;width: 50%;background: #f3f2f2;">*You cannot enter more
                            that 80 character for the title</span>
                    </div>
                </div>
                <!-- <div style="padding-top:10px;">
                    <h2 class="d-inline">{{emailCampaign.emailCapaignTitle}}</h2>
                </div> -->

                <div *ngIf="activeTab == 'email' && editEmailView" style="position: absolute;bottom: 12px;right: 0;">
                    <div (click)="onNavigation('changeEmailTemplate')" style="display: inline-block;position: relative;right: 15px;cursor: pointer;font-size: 12px;
                    color: #707070;">
                       <img src="assets/icons/ic_templateemail.svg" style="margin-bottom: 3px;"> Change Email Template
                    </div>
                    <div style="display: inline-block;background: #E9E9E9;padding: 5px 25px;border-radius: 3px;cursor: pointer;" (click)="preview();">
                        Preview
                    </div>
                </div>
            </div>
          
        </div>  
    </section>
    <!-- end section header -->
    <!-- <app-edit-email></app-edit-email> -->
    <!-- start section content -->
    <section class="content" style="position: fixed;z-index: 1;width: 100%;top: 50px;">
        <!-- The Modal -->
            <div id="sendBroadcastEmailModal" class="modal">
                <!-- Modal content -->
                <div class="modal-content">
                <div class="modal-header">
                    <h4 style="font-family: Open-Sans-SemiBold;
                    font-size: 20px;">Send a Broadcast Email</h4>
                    <span *ngIf="sendingEmail == false" class="close" (click)="closeSendEmailBox()">&times;</span>
                    
                </div>
                <div class="modal-body" id="successfullySentBroadcastEmail" style="display: none;">
                    <div style="font-family: Open-Sans-SemiBold;
                    font-size: 20px;">Broadcast Email Was Sent Successfully</div>
                   <img src="assets/icons/img_emailsent.svg" style="height: 90px;margin-top: 21px;">
                    <button type="button" class="btn" (click)="closeSendEmailBox()">Done</button>
                </div>
                <div class="modal-body" id="sendingBroadcastEmail">
                    <div style="font-family: Open-Sans-SemiBold;
                    font-size: 20px;">Sending your email...</div>
                   <img src="assets/images/loaderImage/demoVideo.mp4.gif" style="height: 200px;">
                </div>
                </div>
            </div> 
        <!-- The Modal Ends-->   
        <div class="row" id="main">
               
                <!-- start  main-content -->
                <div class="main-sequence3 broadcast" >
                    <div class="header-tab" > 
                        <ul class="sequence nav nav-tabs">
                            <li class="img text-center" *ngIf="emailCampaign.status == 'SENT'" [ngClass]="{'active':activeTab == 'dashboard'}" style="padding: 16px 0px;">
                                <a href="#dashboardTab" data-toggle="tab" (click)="setActiveTab('dashboard')">1. Dashboard
                                </a>
                            </li>
                            <li class="img text-center"  [ngClass]="{'active':activeTab == 'recipients'}" style="padding: 16px 0px;">
                                <a href="#1a" data-toggle="tab" (click)="setActiveTab('recipients')">
                                    <span *ngIf="emailCampaign.status == 'SENT'">2</span>
                                    <span *ngIf="emailCampaign.status != 'SENT'">1</span>. Recipients
                                </a>
                            </li>
                            <li class="img text-center" [ngClass]="{'active':activeTab == 'email'}" style="margin-left: 7px;padding: 16px 0px;" >
                                    <a href="#2a" data-toggle="tab" (click)="setActiveTab('email')">
                                        <span *ngIf="emailCampaign.status == 'SENT'">3</span>
                                        <span *ngIf="emailCampaign.status != 'SENT'">2</span>. Email
                                    </a>
                            </li>
                            <li class="img text-center" [ngClass]="{'active':activeTab == 'settings'}" style="padding: 16px 0px;">
                                    <a href="#3a" data-toggle="tab" (click)="setActiveTab('settings')">
                                    <span *ngIf="emailCampaign.status == 'SENT'">4</span>
                                    <span *ngIf="emailCampaign.status != 'SENT'">3</span>. Settings
                                    </a>
                            </li>
                            <li class="img text-center" *ngIf="emailCampaign.status != 'SENT'" [ngClass]="{'active':activeTab == 'sendemail'}" style="padding: 16px 0px;">
                                <a href="#4a" data-toggle="tab" (click)="setActiveTab('sendemail')">4. Send Email
                                </a>
                        </li>
                          

                        </ul>
                        <div id="errorMessage" style="position: absolute;background: yellow;width: 50%; padding: 6px 10px;
                            text-align: center;width: 50%;margin-left: -25%;left:50%;display: none;">
                            {{errorMessage}}
                            <span style="float: right;color: #e2dede;cursor: pointer;" (click)="toggleErrorMessage('close')">x</span>
                        </div>
                    </div>  
                    
                    <div class="tab-content scrollsection clearfix" style="height: 80vh;overflow: scroll;">
                        <div [ngClass]="{'hide':activeTab != 'recipients','show':activeTab == 'recipients'}" class="tab-pane tab-panesection active" id="1a" style="height: auto;overflow: auto;">
                            <div id="content-body">
                                <div class="content content1 text-center">
                                   <div class="componant">
                                       <div class="dropdownCircle" (click)="showFilterList()" *ngIf="emailCampaign.status == 'SENT'">
                                            <!-- <img src="assets/icons/arrow-down.svg"> -->
                                            <i id="toggelDownIcon" class="down"></i>
                                       </div>
                                        <div id="segmentationList" class="componant-content" [ngStyle]="{'display': emailCampaignSent == false ? 'block' : 'none'}" style="margin-bottom: 1%;">
                                            <h1>Include people matching these filters</h1>
                                            <div style="background: #EFEFEF;border: 1px solid #E1E1E1;padding: 20px;">
                                                <div *ngFor="let filter of filters" style="text-align: left;padding-top: 10px;">
                                                    <div class="dropdown segmentationDiv" style="display: inline;">
                                                        <select name="Filter" class="dropDownIcon" style="background-color: white;" [(ngModel)]="filter.selectedSegment" 
                                                        (change)="selectSegmentEvent2($event, filter)" >
                                                            <optgroup  *ngFor="let segment of segmentationData" label={{segment.title}}>
                                                                <option *ngFor="let segmentEvent of segment.segmentationEvent" value={{segmentEvent.value}}>
                                                                    {{segmentEvent.text}}
                                                                </option>
                                                            </optgroup>
                                                        </select>
                                                    </div>
                                                    <div *ngIf="filter.parentSegmentation.id" class="dropdown segmentationDiv" style="padding: 0 10px 0 10px; display: inline;">
                                                        <span style="font-size: 12px;background: white;padding: 5px;
                                                        border: 1px solid #e4e1e1;">
                                                            {{filter.segmentationMatch.matchTag}}
                                                        </span>
                                                        <select *ngIf="filter.segmentationMatch.segmentationMatch.length > 0 " name="Filter" class="dropDownIcon" style="background-color: white;width: 20%;" [(ngModel)]="filter.matchTag">
                                                            <option *ngFor="let segmentMatch of filter.segmentationMatch.segmentationMatch"  value={{segmentMatch.id}}>
                                                                    {{segmentMatch.matchString}}
                                                            </option>
                                                        </select>
                                                        <select *ngIf="filter.segmentationMatch.segmentationMatchExtension.length > 0" name="Filter" class="dropDownIcon" style="background-color: white;width: 20%" [(ngModel)]="filter.matchExtension"
                                                            (change)="selectedUnsubscribeFromAllMailings(filter,filter.segmentationMatch.segmentationMatchExtension)">
                                                            <option *ngFor="let segmentExt of filter.segmentationMatch.segmentationMatchExtension" value={{segmentExt.id}}>
                                                                {{segmentExt.text}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                    <div *ngIf="filter.parentSegmentation.id == 1" class="segmentationDiv">
                                                        <div class="dropdown segmentationDiv" *ngIf="filter.segmentationMatch.value == 'broadcast_emails'">
                                                            <select name="Filter" class="dropDownIcon" style="background-color: white;" [(ngModel)]="filter.broadcastOrEmailId">
                                                                <option hidden value="" disabled selected>Select {{filter.segmentationMatch.text}} </option>
                                                                <option *ngFor="let camp of filter.campaign" value={{camp.id}}>
                                                                    {{camp.emailTitle}}
                                                                </option>
                                                            </select>
                                                        </div>
                                                        <div class="dropdown segmentationDiv" *ngIf="filter.segmentationMatch.value == 'campaigns'">
                                                            <select name="Filter" class="dropDownIcon" style="background-color: white;" [(ngModel)]="filter.campaignId">
                                                                <option hidden value="" disabled selected>Select {{filter.segmentationMatch.text}} </option>
                                                                <option *ngFor="let camp of filter.campaign" value={{camp.id}}>
                                                                    {{camp.emailCapaignTitle}}
                                                                </option>
                                                            </select>
                                                        </div>
                                                        <div class="dropdown segmentationDiv" *ngIf="filter.segmentationMatch.value == 'campaign_emails'">
                                                            <select name="Filter" class="dropDownIcon" style="background-color: white;" [(ngModel)]="filter.broadcastOrEmailId">
                                                                <option hidden value="" disabled selected>Select {{filter.segmentationMatch.text}} </option>
                                                                <optgroup  *ngFor="let camp of filter.campaign" label={{camp.emailCapaignTitle}}>
                                                                    <option *ngFor="let campEmail of camp.emailCampaignDtl" value={{campEmail.id}}>
                                                                        {{campEmail.emailSubject}}
                                                                    </option>
                                                                </optgroup>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="dropdown segmentationDiv" *ngIf="filter.segmentationMatch.value == 'email_address'">
                                                        <input type="text" class="form-control cst-control" style="display: inline;font-size: 14px;width: 20%;"
                                                    placeholder="me@example.com" [(ngModel)]="filter.email" />
                                                    </div>
                                                    <div *ngIf="filter.matchExtensionValue == 'count'" class="dropdown segmentationDiv">
                                                        <select name="Filter" class="dropDownIcon" style="background-color: white;width: 10%;background-position: 89% 10px;" [(ngModel)]="filter.timesCount">
                                                            <option *ngFor="let times of matchExtensionCount" value={{times}}>
                                                                {{times}}
                                                            </option>
                                                        </select><span style="border: 1px solid #ced4da;padding: 5px">times</span>
                                                    </div>
                                                    <div  class="dropdown segmentationDiv" *ngIf="filter.matchExtensionValue == 'date' || filter.matchExtensionValue == 'before' || filter.matchExtensionValue == 'on_or_after' || filter.selectedSegment == 'person_timezone'">
                                                        <input type="date" class="form-control cst-control"  *ngIf="filter.selectedSegment != 'person_timezone'"
                                                        placeholder="Choose a date.." style="font-size: 12px;vertical-align: middle;width: 15%;"  [(ngModel)]="filter.date" />
                                                        <div class="dropdown segmentationDiv"  *ngIf="filter.matchExtensionValue == 'before' || filter.matchExtensionValue == 'on_or_after' || filter.selectedSegment == 'person_timezone'">
                                                            <select name="Filter" class="dropDownIcon" style="background-color: white;width: 20%;" [(ngModel)]="filter.timezone">
                                                                <option value="client">recipient's timezone</option>
                                                                <option value="America/New_York">Eastern timezone</option>
                                                                <option value="UTC">UTC timezone</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="dropdown segmentationDiv" *ngIf="filter.matchExtensionValue == 'days' || filter.matchExtensionValue == 'in_the_last'">
                                                        <input type="text" class="form-control" style="width: 5%;display: inline-block;height: 30px;vertical-align: middle;font-size: 12px;
                                                        font-weight: bold;" [(ngModel)]="filter.days"/>
                                                        <div class="dropdown"  *ngIf="filter.matchExtensionValue == 'in_the_last'" style="display: inline;">
                                                            <select name="Filter" class="dropDownIcon" style="background-color: white;
                                                            width: 10%;vertical-align: middle;"  [(ngModel)]="filter.units">
                                                                <option value="minutes">minutes</option>
                                                                <option value="hours">hours</option>
                                                                <option value="days">days</option>
                                                            </select>
                                                        </div>
                                                        <span style="border: 1px solid #ced4da;padding: 5px;" *ngIf="filter.matchExtensionValue == 'days'">days</span>
                                                    </div>
                                                    <div class="dropdown segmentationDiv" *ngIf="filter.selectedSegment == 'tags'">
                                                        <select name="Filter" class="dropDownIcon" style="background-color: white;width: 20%">
                                                            <option>Tag1</option>
                                                            <option>Tag2</option>
                                                            <option>Tag3</option>
                                                        </select>
                                                    </div>
                                                    <img *ngIf="filters.length > 1" src="./assets/icons/ic_close.svg" style="float: right;" (click)="deleteBroadCastFilter(filter)">
                                                </div>
                                                <div style="width: fit-content;">
                                                    <button style="float: none;" *ngIf="emailCampaign.status != 'SENT'" class="condation" (click)="addMoreFilters();">
                                                            Add Condition
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="componant-content" [ngStyle]="{'display': emailCampaignSent == true ? 'table' : 'none'}" style="width: 100%;margin-bottom: 0;
                                        height: 100px;
                                        border: 1px solid;">
                                               <div style="display: table-cell;vertical-align: middle;">
                                                    This Broadcast was sent to {{subscribers.length}} people
                                                </div> 
                                        </div>
                                        <div style="width: fit-content;" *ngIf="emailCampaign.status != 'SENT'">
                                            <button class="condation" style="width: auto;
                                            margin-right: 10px;
                                            background: #0B8B8C;
                                            border: 1px solid #0B8B8C;" (click)="saveFilters()">
                                                Save Recipients
                                            </button>
                                            <button class="condation" style="width: auto;" (click)="deleteAllFilters()">
                                                Clear All Filters
                                            </button>
                                        </div>
                                        <h1 style="margin-top: 20px;">Showing {{pageObjectForSubscriber.numberOfElements}} of {{pageObjectForSubscriber.totalElements}} Subscriber</h1> 
                                        <table class="table ">
                                            <thead>
                                            <tr>
                                                <th style="width: 35%;">NAME</th>
                                                <th style="width: 40%;">EMAIL ADDRESS</th>
                                                <th style="width: auto;">ADDED ON</th>
                                                
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr *ngFor="let sub of subscribers" style="border-bottom: 1px solid #dee2e6;">
                                                <td>{{sub.user.firstName}} {{sub.user.middleName}} {{sub.user.lastName}}</td>
                                                <td>{{sub.user.email}}</td>
                                                <td>{{sub.addedOn  | date: 'dd/MM/yyyy'}}</td>
                                            </tr>
                                            
                                            </tbody>
                                        </table>
                                            
                                    </div>
                                    <div class="center">
                                        <ul class="pagination">
                                            <li [ngClass]="{'disabled': pageObjectForSubscriber.isFirstPage}"
                                                (click)="setActiveTab('recipients',pageObjectForSubscriber.currentPage-1)">&laquo;</li>
                                            <li *ngFor="let page of totalPagesForSubscriber"
                                                [ngClass]="{'active': pageObjectForSubscriber.currentPage == page}"
                                                (click)="setActiveTab('recipients',page)">
                                                {{page+1}}</li>
                                            <li [ngClass]="{'disabled': pageObjectForSubscriber.isLastPage}"
                                                (click)="setActiveTab('recipients',pageObjectForSubscriber.currentPage+1)">&raquo;</li>
                                        </ul>
                                    </div>
                                </div>

                                <!-- <div class="footer">
                                    <button (click)="onNavigation('recNext')">Next</button>
                                </div>  -->
                            </div>
                        </div>
                        <div [ngClass]="{'hide':activeTab != 'email' ,'show':activeTab == 'email'}" class="tab-pane tab-panesection" id="2a" style="height: auto;overflow: auto;" >
                           <div [ngClass]="{'hide': editEmailView == true ,'show': editEmailView == false}">
                            <app-email-template-sequance (templateEv)="onEditEmail($event)"></app-email-template-sequance>
                           </div>
                           <div  [ngClass]="{'hide': editEmailView == false,'show': editEmailView == true}" style="background: white;">
                            <app-edit-email *ngIf="activeTab == 'email' && editEmailView && emailCampaign.status != 'SENT'" [asSubmodule]='asSubmodule'
                            (navigate)="onNavigation($event)"></app-edit-email>
                            <app-email-preview *ngIf="activeTab == 'email' && editEmailView && emailCampaign.status == 'SENT'"></app-email-preview>
                           </div>
                           <!-- <div  [ngClass]="{'hide': emailCampaign.status != 'SENT' ,'show': emailCampaign.status == 'SENT'}" style="background: white;">
                            
                           </div> -->

                           
                        </div>
                       
                        <div [ngClass]="{'hide':activeTab != 'settings','show':activeTab == 'settings'}" class="tab-pane tab-panesection" id="3a" style="height: auto;overflow: auto;">
                            <div id="content-body" style="margin-top: 15px;">
                                <div class="content text-center w-75 m-25" style="margin: 0px 15%;">
                            
                                    <div class="first text-left">
                                        <h1>Identity Setting</h1>
                                        <hr>
                                        <form>
                                            <div class="row">
                                                <div class="col-sm-6">
                                                    <div class="form-group ">
                                                        <label>“From” Name</label>
                                                        <input placeholder="Your Name" type="text" [disabled]="emailCampaign.status == 'SENT'"
                                                            required class="form-control w-75" name="fromName"
                                                            [(ngModel)]="updatedEmailCampaign.fromName" required
                                                            #fromName="ngModel">
                                                        <div class="validationError"
                                                            *ngIf="fromName.invalid && (fromName.dirty || fromName.touched)">
                                                            Please Enter From Name
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6">
                                                    <div class="form-group">
                                                        <label >“From” Email</label>
                                                        <input placeholder="Your email" type="email" class="form-control w-75"
                                                            required name="fromEmail" [disabled]="emailCampaign.status == 'SENT'"
                                                            [(ngModel)]="updatedEmailCampaign.fromEmail" required
                                                            #fromEmail="ngModel" (ngModelChange)="checkEmailAddressDMARC()" >
                                                            <div class="validationError" *ngIf="dmarkRule == false">
                                                                {{fromEmailErrorMesage}}
                                                            </div>
                                                    </div>
                                                </div>
                                            </div>
                                          
                                            <div class="form-group">
                                                <label>BCC (Optional)</label>
                                                <input type="text" class="form-control" placeholder="Business" required
                                                pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" [disabled]="emailCampaign.status == 'SENT'"
                                                name="bcc" [(ngModel)]="updatedEmailCampaign.bcc" style="width: 88%;" #bcc="ngModel">
                                                <div class="validationError"
                                                    *ngIf="bcc.invalid && (bcc.dirty || bcc.touched)">
                                                    Please Enter proper value Bcc
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label for="postal">Postal Address</label>
                                                <input type="text" id="postal" class="form-control" placeholder=" Postal address test one two three"
                                                name="postalAddress" #postalAddress="ngModel" required [disabled]="emailCampaign.status == 'SENT'"
                                                [(ngModel)]="updatedEmailCampaign.postalAddress" style="width: 88%;">
                                                <div class="validationError"
                                                *ngIf="postalAddress.invalid && (postalAddress.dirty || postalAddress.touched)">
                                                Please Enter postal address
                                            </div>
                                            </div>
                                           
                                        </form>
                                        <div class="form-group" style="padding-left: 26px;">
                                            <hr>
                                            <p>Want to change what appears here by default? Update your email defaults.</p>
                                        </div>
                                    </div>

                                    <div class="first text-left" style="padding-bottom: 15px;">
                                        <h1>Primary Purpose</h1>
                                        <hr>
                                        <form>
                                            <div class="form-group">
                                                <label>What is the primary purpose of this Broadcast?</label>
                                                
                                                <div class="dropdown form-control" style="width: 66%; padding: 0px;">
                                                    <button class="btn  dropdown-toggle w-100 text-left p-0" type="button" (click)="openSettingsDropDownMenu()" [disabled]="emailCampaign.status == 'SENT'">
                                                        {{updatedEmailCampaign.campaignPrimaryPurpose}} <img src="./assets/icons/arrow-down.svg" >
                                                    </button>
                                                    <div style="width:100% !important;background: white;border: 1px solid #d4d0d0;display: none;" 
                                                          id="settingsDropDownMenu">
                                                      <span class="primaryPurpose" (click)="selectPrimaryPurpose('Commercial')">
                                                        <img src="assets/icons/correct.svg" *ngIf="updatedEmailCampaign.campaignPrimaryPurpose == 'Commercial'"> Commercial
                                                        <p style="padding-bottom: 0px; margin-bottom: 0px;">Content that advertises or promotes a commercial product or service, including content on a website operated for commercial purpose</p>
                                                      </span>
                                                      <span class="primaryPurpose" (click)="selectPrimaryPurpose('Transactional/ relationship')">
                                                        <img src="assets/icons/correct.svg" *ngIf="updatedEmailCampaign.campaignPrimaryPurpose == 'Transactional/ relationship'"> 
                                                        Transactional/ relationship
                                                       <p style="padding-bottom: 0px; margin-bottom: 0px;">Content which facilitates an already agreed-upon transaction or updates a customer about an ongoing transaction</p>
                                                      </span>
                                                    </div>
                                                  </div>
                                            </div>
                                        </form>
                                        <div class="form-group" style="padding-left: 26px;">
                                            <hr>
                                            <p style="width: 72.3%;">The primary purpose governs what is required in your emails to remain compliant with the CAN-SPAM Act. 
                                                For more information about the difference between “commercial” and “transactional” email, 
                                                check out the CAN-SPAM Compliance Guide.</p>
                                        </div>
                                    </div>
                                </div>
                            </div> 
                        </div>
                        <div [ngClass]="{'hide':activeTab != 'sendemail','show':activeTab == 'sendemail'}" class="tab-pane tab-panesection" id="4a" style="height: auto;overflow: auto;">
                                <div id="content-body" >
                                    <div class="content content1 text-center">
                                       <div class="content-email" style="margin: 6% auto;width: 62.76%">
                                           <div class="header">
                                               <h1>Are you ready to send this email broadcast to {{subscribers.length}} subscribers?</h1>
                                           </div>
                                            <form class="radio" style="width: 47%;margin: 0px auto;">
                                                    <ul class="nav nav-pills d-block">
                                                        <li  class="nav-item">
                                                                <a  href="#" data-toggle="tab" class="active" (click)="selectOption($event, 1);">
                                                                    <label class="radio-inline ">
                                                                         <input type="radio" name="optradio" id="1r" class="regular-checkbox" (click)="selectOption($event, 1);">
                                                                         Send right now
                                                                    </label>
                                                                </a> 
                                                        </li>
                                                        <li  class="nav-item">
                                                                <a  href="#" data-toggle="tab" (click)="selectOption($event, 2);">
                                                                    <label class="radio-inline ">
                                                                         <input type="radio" name="optradio" id="2r" class="regular-checkbox" (click)="selectOption($event, 2);">
                                                                         Send at a specific date & time
                                                                    </label>
                                                                </a>
                                                        </li>
                                                    </ul>
                                                    <div class="tab-content ">
                                                            <div class="tab-pane now active" id="1b" [ngClass]="{'hide':mailOpt != 1, 'show':mailOpt == 1}" style="height: auto;">
                                                                <div  class="groub-button" style="margin-top: 20px;text-align: center;">
                                                                    <button class="cancel"> Cancel</button>
                                                                    <button class="send" [disabled]="!subscribers.length" 
                                                                        [ngClass]="{'disabled-btn': !subscribers.length}"  (click)="sendBcEmail('immediate')">Send Immediately</button>
                                                                </div>
                                                                    
                                                            </div>
                                                        
                                                            <div class="tab-pane email2" id="2b" [ngClass]="{'hide':mailOpt != 2, 'show':mailOpt == 2}" style="height: auto;">
                                                                    <div class="form-group"> <!-- Date input -->
                                                                        <label class="control-label" for="date" style="font-size: 12px;margin-bottom: 0px;"><b>Date</b></label>
                                                                        <!-- <input class="form-control" id="date" name="date" placeholder="August 22, 2018" type="text"/> -->
                                                                        <div style="display: flex;">
                                                                            <input id="datepicker" type="text" class="form-control cst-control" style="height: 30px;font-size: 12px;
                                                                            font-weight: 500;"
                                                                                name="emailBroadcastDate" [(ngModel)]="emailBroadcastDate" required
                                                                                #emailSentDateAuto="ngModel" />
                                                                            <span class="addon-item" (click)="onDPIconClick()" style="position: relative;right:12%;top:3px">
                                                                                <i class="material-icons" style="color: #707070;border:none;padding: 0px;">
                                                                                    date_range
                                                                                </i>
                                                                            </span>
                                                                        </div>
                                                                        <!-- <img src="./assets/icons/ic_calendar.svg"> -->
                                                                        <div
                                                                            *ngIf="emailSentDateAuto.invalid && (emailSentDateAuto.dirty || emailSentDateAuto.touched)"
                                                                            class="validationError">

                                                                            <div *ngIf="emailSentDateAuto.errors.required">
                                                                            *Event Starts Date is required.
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label style="font-size: 12px;margin-bottom: 0px;"><b>Time</b></label>
                                                                            <div class="bs-example time">
                                                                            <div class="form-group">
                                                                                    <div class="bs-example">
                                                                                        <select name="hours" class="dropDownIcon" [(ngModel)]="hours"
                                                                                            (change)="changeTime($event.target.value)">
                                                                                            <option value="01">01</option>
                                                                                            <option value="02">02</option>
                                                                                            <option value="03">03</option>
                                                                                            <option value="04">04</option>
                                                                                            <option value="05">05</option>
                                                                                            <option value="06">06</option>
                                                                                            <option value="07">07</option>
                                                                                            <option value="08">08</option>
                                                                                            <option value="09">09</option>
                                                                                            <option value="10">10</option>
                                                                                            <option value="11">11</option>
                                                                                            <option value="12">12</option>
                                                                                        </select>
                                                                                        <select name="minutes" class="dropDownIcon" [(ngModel)]="selectedMint"
                                                                                            (change)="changeTime($event.target.value)">
                                                                                            <option *ngFor="let m of minutes" value={{m}}>{{m}}</option>
                                                                                        </select>
                                                                                        <select name="am_pm" class="dropDownIcon" [(ngModel)]="am_pm"  style="margin-left: 5px;"
                                                                                            (change)="changeTime($event.target.value)">
                                                                                            <option value="AM">AM</option>
                                                                                            <option value="PM">PM</option>
                                                                                        </select>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                    </div>
                                                                    <div  class="form-group">
                                                                        <label style="font-size: 12px;margin-bottom: 0px;"><b>Timezone</b></label>
                                                                        <div class="input-group">
                                                                            <div class="dropdown">
                                                                                <select name="timeZone" class="dropDownIcon"
                                                                                    [(ngModel)]="emailBroadcastTimeZone">
                                                                                    <option value="client">recipient's timezone</option>
                                                                                    <option value="America/New_York">Eastern timezone</option>
                                                                                    <option value="UTC">UTC timezone</option>
                                                                                </select>
                                                                                
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    
                                                                    <div  class="groub-button mt-3" style="margin-top: 25px !important;">
                                                                        <button class="draft" (click)="sendBcEmail('DRAFT')"> No, keep as a draft</button>
                                                                        <button class="Confirm" [disabled]="!subscribers.length" [ngClass]="{'disabled-btn': !subscribers.length}" (click)="sendBcEmail('SCHEDULED')">Confirm</button>
                                                                    </div>
                                                            </div>
                                                        </div>
                                            </form>

                                       </div>
                                    </div>
                                    <!-- <div class="footer">
                                        <button style="background: #fff;color: #000;" (click)="onNavigation('seBack')">Back</button>
                                    </div>  -->
                                </div>
                        </div>
                        <div [ngClass]="{'hide':activeTab != 'dashboard','show':activeTab == 'dashboard'}" class="tab-pane tab-panesection" id="dashboardTab" style="height: auto;overflow: auto;">
                            <div >
                                <div style="width: 60%;height: 110px;background-color: white;
                                margin: 0 auto;margin-top: 2%;box-shadow: 0px 3px 6px #00000029;">
                                <table style="width: 100%;">
                                    <tr>
                                        <td style="width: 25%;">
                                            <div style="background: #0B8B8C;color: white;width: 85%;
                                            padding-left: 15px;;display: inline-block;margin: 10px;
                                            box-shadow: 0px 3px 6px #00000029;border-radius: 4px;">
                                                <label style="margin-bottom: 0px;font-size: 14px;">This email sent on</label>
                                               <span style="display: block;font-size: 24px;">{{dashboardCount.emailBroadcastDate |  date: 'MMM d, y'}}</span>
                                               <span style="font-size: 20px;">{{dashboardCount.time |  date: 'shortTime'}}</span>
                                            </div> 
                                        </td>
                                        <td >
                                            <label style="font-family: 'Open-Sans-SemiBold';
                                            font-size: 14px;
                                            color: #707070;
                                            margin-bottom: 0px;">People</label>
                                            <span style="display: block;font-family: 'Open-Sans-SemiBold';
                                            font-size: 20px;">{{dashboardCount.subscriberCount}}</span>
                                        </td>
                                        <td >
                                            <label style="font-family: 'Open-Sans-SemiBold';
                                            font-size: 14px;
                                            color: #707070;
                                            margin-bottom: 0px;">Open Rate</label>
                                            <span style="display: block;font-family: 'Open-Sans-SemiBold';
                                            font-size: 20px;">{{dashboardCount.openRate}}%</span>
                                        </td>
                                        <td >
                                            <label style="font-family: 'Open-Sans-SemiBold';
                                            font-size: 14px;
                                            color: #707070;
                                            margin-bottom: 0px;">Click through rate</label>
                                            <span style="display: block;font-family: 'Open-Sans-SemiBold';
                                            font-size: 20px;">{{dashboardCount.clickRate}}%</span>
                                        </td>
                                        <td >
                                            <label style="font-family: 'Open-Sans-SemiBold';
                                            font-size: 14px;
                                            color: #707070;
                                            margin-bottom: 0px;">Unsubscribe rate</label>
                                            <span style="display: block;font-family: 'Open-Sans-SemiBold';
                                            font-size: 20px;">{{dashboardCount.unsubscribeRate}}%</span>
                                        </td>
                                    </tr>
                                </table>
                                    
                                </div>
                                <div class="dashboardTabs">
                                        <ul>
                                            <li class="img text-center" [ngClass]="{'active':dashboardActiveTab == 'Opened'}" >
                                               <span >{{dashboardCount.openCount}}</span>
                                                <a href="javascript:void(0)" (click)="setDashboardActiveTab('Opened')">
                                                    Opened
                                                </a>
                                            </li>
                                            <li class="img text-center"  [ngClass]="{'active':dashboardActiveTab == 'Clicked'}">
                                                <span>{{dashboardCount.clickCount}}</span>
                                                <a href="javascript:void(0)" (click)="setDashboardActiveTab('Clicked')">
                                                    Clicked
                                                </a>
                                            </li>
                                            <li class="img text-center" [ngClass]="{'active':dashboardActiveTab == 'Unsubscribe'}">
                                                <span>{{dashboardCount.unsubscribekCount}}</span>
                                                <a href="javascript:void(0)" (click)="setDashboardActiveTab('Unsubscribe')">
                                                    Unsubscribe
                                                </a>
                                            </li>
                                        </ul>
                                        <div id="dashboardOpenTab" style="height: auto;">
                                            <canvas  id="barChart" style="width: 80%;margin: 0px auto;">{{barchart}}
                                            </canvas>
                                        </div>
                                        <!-- <div id="dashboardOpenTab" *ngIf="dashboardActiveTab == 'Opened'" style="height: auto;">
                                            <canvas  id="barChart" style="width: 80%;margin: 0px auto;">{{barchart}}
                                            </canvas>
                                        </div> -->
                                        <!-- <div id="dashboardClickedTab" *ngIf="dashboardActiveTab == 'Clicked'" style="height: auto;">
                                            <canvas  id="barChart" style="width: 80%;margin: 0px auto;">{{barchart}}
                                            </canvas>
                                        </div>
                                        <div id="dashboardUnsubscribeTab" *ngIf="dashboardActiveTab == 'Unsubscribe'" style="height: auto;">
                                            <canvas  id="barChart" style="width: 80%;margin: 0px auto;">{{barchart}}
                                            </canvas>
                                        </div> -->
                                        <ul class="dashboardTabFooter">
                                            <li style="width: 20%;font-size: 14px;color: #707070;font-weight: 500;">
                                                Delivered <span style="color: black;font-size: 18px;font-weight: bold;">6</span> 
                                                <img src="assets/icons/info.svg" style="width: 14px;margin-left: 5px;">
                                            </li>
                                            <li style="width: 20%;font-size: 14px;color: #707070;font-weight: 500;">
                                                Bounced <span style="color: black;font-size: 18px;font-weight: bold;">2</span> 
                                                <img src="assets/icons/info.svg" style="width: 14px;margin-left: 5px;"> 
                                            </li>
                                            <li style="width: 20%;font-size: 14px;color: #707070;font-weight: 500;">
                                                Spam Complaints <span style="color: black;font-size: 18px;font-weight: bold;">0</span> 
                                                <img src="assets/icons/info.svg" style="width: 14px;margin-left: 5px;">
                                            </li>    
                                        </ul>
                                </div>
                            </div>
                    </div>
                    </div>
                </div>
                <!-- end  main-content -->
            </div>  
    </section>
    <!-- end section content -->
    <section class="header" style="position: fixed;z-index: 2;width: 100%;bottom: 0px;height: 50px;
    background: white;
    padding: 10px;border-top: 1px solid #bfb4b4;">
        
        <div style="text-align: center;">
        <button  *ngIf="activeTab != 'recipients'"
        style="background: #fff;color: #000;margin-left: 10%;
        border: 1px solid;width: 100px;padding: 4px;border-radius: 2px;float: left;" (click)="onNavigation(activeTab+'Back')">Back</button>
        <button (click)="saveSettings()"  *ngIf="activeTab == 'settings'"
        style="width: 100px;padding: 4px;border: none;
        background: #0b8b8c;color: white;border-radius: 2px;margin-right: 10%;">Save</button>
        <button (click)="onNavigation(activeTab+'Next')"  *ngIf="activeTab != 'sendemail'"
        style="float: right;width: 100px;padding: 4px;border: none;
        background: black;color: white;border-radius: 2px;margin-right: 10%;">Next</button>
        </div>
    </section>
</div>
<ngx-ui-loader [loaderId]="'loader-01'"></ngx-ui-loader>